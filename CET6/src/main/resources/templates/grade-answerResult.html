<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<div th:replace="common/header::header('试卷列表')"></div>
<script>
    Date.prototype.Format = function (fmt) { //将蓝括号的这段要放在调用时间的上面，
        var o = {
            "M+": this.getMonth() + 1, //月份
            "d+": this.getDate(), //日
            "h+": this.getHours(), //小时
            "m+": this.getMinutes(), //分
            "s+": this.getSeconds(), //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds() //毫秒
        };
        if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var k in o)
            if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
        return fmt;
    }
    function getSaList() {
        $.ajax({
            type: "post",
            url: "/erems/paper/saList",    //url根据自己的项目实际定义
            async: false,
            dataType: "text",
            error: function () {
                alert("系统忙，请稍后再试！");
                return false;
            },
            success: function (text) {
                var expressAnswersheet = $("#saList");
                var str = '';
                var count = 1;
                var data = eval("(" + text + ")");
                str += '<tr><td>' + data + '</td></tr>';
                expressAnswersheet.empty();
                expressAnswersheet.append(str);
            }
        });
    }
    function getFaList() {
        $.ajax({
            type: "post",
            url: "/erems/paper/faList",    //url根据自己的项目实际定义
            async: false,
            dataType: "text",
            error: function () {
                alert("系统忙，请稍后再试！");
                return false;
            },
            success: function (text) {
                var expressAnswersheet = $("#faList");
                var str = '';
                var count = 1;
                var data = eval("(" + text + ")");
                expressAnswersheet.empty();
                for (var o in data) {
                    str += '<tr>'
                        + '<td>' + count + '</td>'
                        + '<td>' + data[o].answer + '</td>'
                        + '<td><input type="hidden" id="faid'+ count +'" name="faid'+ count +'" value="'+ data[o].id +'"/></td>'
                        + '<td><textarea id="fscore'+ count +'" name="fscore'+ count +'" class="required" placeholder="请输入评分结果(10分)" rows="1" th:text="*{fscore'+ count +'}"></textarea></td>'
                        + '</tr>';
                    count++;
                }
                expressAnswersheet.append(str);
            }
        });
    }
</script>
<body onload="getSaList();getFaList()">
<div id="wrapper" class="row">
  <div th:replace="common/header::nav"></div>
  <div id="page-inner">
    <div class="row">
      <div class="col-md-12">
        <h1 class="page-head-line">试卷列表</h1>
        <h1 class="page-subhead-line">以下是当前所有试卷列表</h1>
      </div>
    </div>
    <!-- /. ROW  -->

    <div class="panel-body">
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th style="width:20%;"></th>
          <th>得分</th>
        </tr>
        </thead>

        <th:block >
          <tbody id="saList">
          <!--<tr>-->
          <!--<td>1</td>-->
          <!--<td>2018-5-4</td>-->
          <!--<td><a href="/erems/examinee/continuePay?id=">继续支付</a></td>-->
          <!--</tr>-->
          </tbody>
        </th:block>
      </table>
      <form action="/erems/manager/saveScore" method="post">
        <div class="table-responsive">
          <table class="table table-striped table-hover">
            <thead>
            <tr>
              <th style="width:20%;"></th>
              <th>学生作答</th>
              <th>评分（满分为10）</th>
            </tr>
            </thead>

            <th:block >
              <tbody id="saList">
              <!--<tr>-->
              <!--<td>1</td>-->
              <!--<td>2018-5-4</td>-->
              <!--<td><a href="/erems/examinee/continuePay?id=">继续支付</a></td>-->
              <!--</tr>-->
              </tbody>
              <tbody id="faList">
              <!--<tr>-->
              <!--<td>1</td>-->
              <!--<td>2018-5-4</td>-->
              <!--<td><a href="/erems/examinee/continuePay?id=">继续支付</a></td>-->
              <!--</tr>-->
              </tbody>
            </th:block>
          </table>
          <button type="submit" class="btn btn-primary">确认提交</button>
          <button class="btn btn-warning">
            <a th:href="'/erems/examinee/paperlist?id='+${session.user.id}" style="color:white;">取消</a>
          </button>
        </div>
      </form>
    </div>
    <!-- /. ROW  -->
  </div>
  <!-- /. PAGE INNER  -->
</div>
<!-- /. WRAPPER  -->

<div th:replace="common/footer"></div>
</body>
</html>
